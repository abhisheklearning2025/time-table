import 'package:uuid/uuid.dart';
import '../../models/timetable.dart';
import '../../models/activity.dart';
import '../../models/category.dart';

/// Default timetable templates
/// Generic, relatable schedules for different lifestyles
class DefaultTemplates {
  static const _uuid = Uuid();

  /// Template 1: Student Schedule (College)
  static Timetable get studentTemplate {
    final timetableId = _uuid.v4();
    final now = DateTime.now();

    return Timetable(
      id: timetableId,
      name: 'College Grind üìö',
      description: 'Balanced schedule for students with classes, study time, and breaks',
      emoji: 'üéì',
      activities: [
        Activity(
          id: _uuid.v4(),
          time: '7:00 AM',
          endTime: '7:30 AM',
          startMinutes: 7 * 60,
          endMinutes: 7 * 60 + 30,
          duration: '30 min',
          title: 'Morning Routine',
          description: 'Wake up, freshen up, get ready',
          category: PresetCategories.personal,
          icon: 'üåÖ',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '7:30 AM',
          endTime: '8:30 AM',
          startMinutes: 7 * 60 + 30,
          endMinutes: 8 * 60 + 30,
          duration: '1 hour',
          title: 'Breakfast & Commute',
          description: 'Eat breakfast and head to campus',
          category: PresetCategories.food,
          icon: 'ü•ê',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '8:30 AM',
          endTime: '12:30 PM',
          startMinutes: 8 * 60 + 30,
          endMinutes: 12 * 60 + 30,
          duration: '4 hours',
          title: 'Morning Classes',
          description: 'Lectures and labs',
          category: PresetCategories.study,
          icon: 'üìñ',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '12:30 PM',
          endTime: '1:30 PM',
          startMinutes: 12 * 60 + 30,
          endMinutes: 13 * 60 + 30,
          duration: '1 hour',
          title: 'Lunch Break',
          description: 'Time to refuel and chill',
          category: PresetCategories.food,
          icon: 'üçï',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '1:30 PM',
          endTime: '4:30 PM',
          startMinutes: 13 * 60 + 30,
          endMinutes: 16 * 60 + 30,
          duration: '3 hours',
          title: 'Afternoon Classes',
          description: 'More lectures and tutorials',
          category: PresetCategories.study,
          icon: '‚úçÔ∏è',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '4:30 PM',
          endTime: '6:00 PM',
          startMinutes: 16 * 60 + 30,
          endMinutes: 18 * 60,
          duration: '1.5 hours',
          title: 'Study Session',
          description: 'Library time or group study',
          category: PresetCategories.study,
          icon: 'üìö',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '6:00 PM',
          endTime: '7:00 PM',
          startMinutes: 18 * 60,
          endMinutes: 19 * 60,
          duration: '1 hour',
          title: 'Dinner',
          description: 'Evening meal with friends',
          category: PresetCategories.food,
          icon: 'üçú',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '7:00 PM',
          endTime: '9:00 PM',
          startMinutes: 19 * 60,
          endMinutes: 21 * 60,
          duration: '2 hours',
          title: 'Homework & Assignments',
          description: 'Complete coursework and projects',
          category: PresetCategories.study,
          icon: 'üíª',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '9:00 PM',
          endTime: '10:00 PM',
          startMinutes: 21 * 60,
          endMinutes: 22 * 60,
          duration: '1 hour',
          title: 'Chill Time',
          description: 'Social media, gaming, or Netflix',
          category: PresetCategories.chill,
          icon: 'üéÆ',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '10:00 PM',
          endTime: '7:00 AM',
          startMinutes: 22 * 60,
          endMinutes: 7 * 60 + (24 * 60),
          duration: '9 hours',
          title: 'Sleep',
          description: 'Rest and recharge',
          category: PresetCategories.sleep,
          icon: 'üò¥',
          isNextDay: true,
          timetableId: timetableId,
        ),
      ],
      type: TimetableType.template,
      createdAt: now,
      updatedAt: now,
      isPublic: true,
    );
  }

  /// Template 2: Professional 9-5
  static Timetable get professionalTemplate {
    final timetableId = _uuid.v4();
    final now = DateTime.now();

    return Timetable(
      id: timetableId,
      name: 'Work Mode üíº',
      description: 'Balanced 9-5 schedule with exercise and family time',
      emoji: 'üëî',
      activities: [
        Activity(
          id: _uuid.v4(),
          time: '6:00 AM',
          endTime: '7:00 AM',
          startMinutes: 6 * 60,
          endMinutes: 7 * 60,
          duration: '1 hour',
          title: 'Morning Workout',
          description: 'Start the day with exercise',
          category: PresetCategories.fitness,
          icon: 'üèãÔ∏è',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '7:00 AM',
          endTime: '8:00 AM',
          startMinutes: 7 * 60,
          endMinutes: 8 * 60,
          duration: '1 hour',
          title: 'Get Ready',
          description: 'Shower, breakfast, and prep',
          category: PresetCategories.personal,
          icon: '‚òï',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '8:00 AM',
          endTime: '9:00 AM',
          startMinutes: 8 * 60,
          endMinutes: 9 * 60,
          duration: '1 hour',
          title: 'Commute',
          description: 'Travel to office',
          category: PresetCategories.commute,
          icon: 'üöó',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '9:00 AM',
          endTime: '12:00 PM',
          startMinutes: 9 * 60,
          endMinutes: 12 * 60,
          duration: '3 hours',
          title: 'Deep Work',
          description: 'Focus time for important tasks',
          category: PresetCategories.work,
          icon: 'üíº',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '12:00 PM',
          endTime: '1:00 PM',
          startMinutes: 12 * 60,
          endMinutes: 13 * 60,
          duration: '1 hour',
          title: 'Lunch',
          description: 'Midday meal and break',
          category: PresetCategories.food,
          icon: 'ü•ó',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '1:00 PM',
          endTime: '5:00 PM',
          startMinutes: 13 * 60,
          endMinutes: 17 * 60,
          duration: '4 hours',
          title: 'Meetings & Tasks',
          description: 'Collaboration and work',
          category: PresetCategories.work,
          icon: 'üìä',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '5:00 PM',
          endTime: '6:00 PM',
          startMinutes: 17 * 60,
          endMinutes: 18 * 60,
          duration: '1 hour',
          title: 'Commute Home',
          description: 'Return from work',
          category: PresetCategories.commute,
          icon: 'üöô',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '6:00 PM',
          endTime: '7:00 PM',
          startMinutes: 18 * 60,
          endMinutes: 19 * 60,
          duration: '1 hour',
          title: 'Dinner',
          description: 'Evening meal',
          category: PresetCategories.food,
          icon: 'üçù',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '7:00 PM',
          endTime: '9:00 PM',
          startMinutes: 19 * 60,
          endMinutes: 21 * 60,
          duration: '2 hours',
          title: 'Family Time',
          description: 'Quality time with loved ones',
          category: PresetCategories.family,
          icon: 'üë®‚Äçüë©‚Äçüëß',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '9:00 PM',
          endTime: '10:00 PM',
          startMinutes: 21 * 60,
          endMinutes: 22 * 60,
          duration: '1 hour',
          title: 'Wind Down',
          description: 'Relax and unwind',
          category: PresetCategories.chill,
          icon: 'üì∫',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '10:00 PM',
          endTime: '6:00 AM',
          startMinutes: 22 * 60,
          endMinutes: 6 * 60 + (24 * 60),
          duration: '8 hours',
          title: 'Sleep',
          description: 'Restful sleep',
          category: PresetCategories.sleep,
          icon: 'üò¥',
          isNextDay: true,
          timetableId: timetableId,
        ),
      ],
      type: TimetableType.template,
      createdAt: now,
      updatedAt: now,
      isPublic: true,
    );
  }

  /// Template 3: Fitness Focused
  static Timetable get fitnessTemplate {
    final timetableId = _uuid.v4();
    final now = DateTime.now();

    return Timetable(
      id: timetableId,
      name: 'Gains & Vibes üí™',
      description: 'Fitness-focused schedule with workouts, meal prep, and recovery',
      emoji: 'üèãÔ∏è',
      activities: [
        Activity(
          id: _uuid.v4(),
          time: '5:30 AM',
          endTime: '6:00 AM',
          startMinutes: 5 * 60 + 30,
          endMinutes: 6 * 60,
          duration: '30 min',
          title: 'Morning Routine',
          description: 'Wake up and prep for workout',
          category: PresetCategories.personal,
          icon: '‚è∞',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '6:00 AM',
          endTime: '7:30 AM',
          startMinutes: 6 * 60,
          endMinutes: 7 * 60 + 30,
          duration: '1.5 hours',
          title: 'Morning Workout',
          description: 'Strength training or cardio',
          category: PresetCategories.fitness,
          icon: 'üèãÔ∏è',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '7:30 AM',
          endTime: '8:30 AM',
          startMinutes: 7 * 60 + 30,
          endMinutes: 8 * 60 + 30,
          duration: '1 hour',
          title: 'Post-Workout & Breakfast',
          description: 'Protein shake and healthy meal',
          category: PresetCategories.food,
          icon: 'ü•§',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '8:30 AM',
          endTime: '12:00 PM',
          startMinutes: 8 * 60 + 30,
          endMinutes: 12 * 60,
          duration: '3.5 hours',
          title: 'Work/Study',
          description: 'Productive morning session',
          category: PresetCategories.work,
          icon: 'üíº',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '12:00 PM',
          endTime: '1:00 PM',
          startMinutes: 12 * 60,
          endMinutes: 13 * 60,
          duration: '1 hour',
          title: 'Lunch',
          description: 'Balanced meal',
          category: PresetCategories.food,
          icon: 'ü•ô',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '1:00 PM',
          endTime: '5:00 PM',
          startMinutes: 13 * 60,
          endMinutes: 17 * 60,
          duration: '4 hours',
          title: 'Afternoon Tasks',
          description: 'Work or errands',
          category: PresetCategories.work,
          icon: 'üìã',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '5:00 PM',
          endTime: '6:30 PM',
          startMinutes: 17 * 60,
          endMinutes: 18 * 60 + 30,
          duration: '1.5 hours',
          title: 'Evening Workout',
          description: 'Second training session',
          category: PresetCategories.fitness,
          icon: 'ü§∏',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '6:30 PM',
          endTime: '7:30 PM',
          startMinutes: 18 * 60 + 30,
          endMinutes: 19 * 60 + 30,
          duration: '1 hour',
          title: 'Dinner',
          description: 'High-protein meal',
          category: PresetCategories.food,
          icon: 'üçó',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '7:30 PM',
          endTime: '9:00 PM',
          startMinutes: 19 * 60 + 30,
          endMinutes: 21 * 60,
          duration: '1.5 hours',
          title: 'Recovery & Stretching',
          description: 'Yoga or mobility work',
          category: PresetCategories.fitness,
          icon: 'üßò',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '9:00 PM',
          endTime: '10:00 PM',
          startMinutes: 21 * 60,
          endMinutes: 22 * 60,
          duration: '1 hour',
          title: 'Chill Time',
          description: 'Relax and unwind',
          category: PresetCategories.chill,
          icon: 'üìñ',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '10:00 PM',
          endTime: '5:30 AM',
          startMinutes: 22 * 60,
          endMinutes: 5 * 60 + 30 + (24 * 60),
          duration: '7.5 hours',
          title: 'Sleep',
          description: 'Recovery sleep',
          category: PresetCategories.sleep,
          icon: 'üò¥',
          isNextDay: true,
          timetableId: timetableId,
        ),
      ],
      type: TimetableType.template,
      createdAt: now,
      updatedAt: now,
      isPublic: true,
    );
  }

  /// Template 4: Content Creator/Freelancer
  static Timetable get creatorTemplate {
    final timetableId = _uuid.v4();
    final now = DateTime.now();

    return Timetable(
      id: timetableId,
      name: 'Creator Mode üöÄ',
      description: 'Flexible schedule for creators, freelancers, and entrepreneurs',
      emoji: 'üé®',
      activities: [
        Activity(
          id: _uuid.v4(),
          time: '8:00 AM',
          endTime: '9:00 AM',
          startMinutes: 8 * 60,
          endMinutes: 9 * 60,
          duration: '1 hour',
          title: 'Morning Routine',
          description: 'Start the day right',
          category: PresetCategories.personal,
          icon: '‚òï',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '9:00 AM',
          endTime: '12:00 PM',
          startMinutes: 9 * 60,
          endMinutes: 12 * 60,
          duration: '3 hours',
          title: 'Content Creation',
          description: 'Create videos, write, design',
          category: PresetCategories.creative,
          icon: 'üé¨',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '12:00 PM',
          endTime: '1:00 PM',
          startMinutes: 12 * 60,
          endMinutes: 13 * 60,
          duration: '1 hour',
          title: 'Lunch Break',
          description: 'Refuel and reset',
          category: PresetCategories.food,
          icon: 'üç±',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '1:00 PM',
          endTime: '3:00 PM',
          startMinutes: 13 * 60,
          endMinutes: 15 * 60,
          duration: '2 hours',
          title: 'Editing & Post-Production',
          description: 'Polish and finalize content',
          category: PresetCategories.creative,
          icon: '‚úÇÔ∏è',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '3:00 PM',
          endTime: '4:00 PM',
          startMinutes: 15 * 60,
          endMinutes: 16 * 60,
          duration: '1 hour',
          title: 'Social Media',
          description: 'Engage with audience',
          category: PresetCategories.social,
          icon: 'üì±',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '4:00 PM',
          endTime: '6:00 PM',
          startMinutes: 16 * 60,
          endMinutes: 18 * 60,
          duration: '2 hours',
          title: 'Client Work',
          description: 'Freelance projects',
          category: PresetCategories.work,
          icon: 'üíª',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '6:00 PM',
          endTime: '7:00 PM',
          startMinutes: 18 * 60,
          endMinutes: 19 * 60,
          duration: '1 hour',
          title: 'Dinner',
          description: 'Evening meal',
          category: PresetCategories.food,
          icon: 'üçî',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '7:00 PM',
          endTime: '9:00 PM',
          startMinutes: 19 * 60,
          endMinutes: 21 * 60,
          duration: '2 hours',
          title: 'Creative Time',
          description: 'Passion projects and experiments',
          category: PresetCategories.creative,
          icon: 'üé®',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '9:00 PM',
          endTime: '11:00 PM',
          startMinutes: 21 * 60,
          endMinutes: 23 * 60,
          duration: '2 hours',
          title: 'Chill & Inspiration',
          description: 'Watch content, read, relax',
          category: PresetCategories.chill,
          icon: 'üéÆ',
          timetableId: timetableId,
        ),
        Activity(
          id: _uuid.v4(),
          time: '11:00 PM',
          endTime: '8:00 AM',
          startMinutes: 23 * 60,
          endMinutes: 8 * 60 + (24 * 60),
          duration: '9 hours',
          title: 'Sleep',
          description: 'Rest and recharge creativity',
          category: PresetCategories.sleep,
          icon: 'üò¥',
          isNextDay: true,
          timetableId: timetableId,
        ),
      ],
      type: TimetableType.template,
      createdAt: now,
      updatedAt: now,
      isPublic: true,
    );
  }

  /// Get all templates
  static List<Timetable> get all => [
        studentTemplate,
        professionalTemplate,
        fitnessTemplate,
        creatorTemplate,
      ];

  /// Get template by name
  static Timetable? getByName(String name) {
    try {
      return all.firstWhere(
        (template) => template.name.toLowerCase().contains(name.toLowerCase()),
      );
    } catch (e) {
      return null;
    }
  }

  /// Get templates by category
  static List<Timetable> getByCategory(String category) {
    // Simple category mapping
    switch (category.toLowerCase()) {
      case 'student':
      case 'education':
        return [studentTemplate];
      case 'professional':
      case 'work':
        return [professionalTemplate];
      case 'fitness':
      case 'health':
        return [fitnessTemplate];
      case 'creative':
      case 'freelance':
        return [creatorTemplate];
      default:
        return all;
    }
  }
}
